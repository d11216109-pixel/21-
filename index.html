<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>10é»åŠ | ä¸‹æ³¨éŠæˆ²</title>
  <style>
    :root {
      --bg: #0b1220;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.09);
      --text: #e8eefc;
      --muted: rgba(232,238,252,0.75);
      --accent: #66e3ff;
      --good: #6dff9f;
      --bad: #ff6d7a;
      --warn: #ffd166;
      --shadow: 0 14px 40px rgba(0,0,0,0.45);
      --radius: 18px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color: var(--text);
      min-height: 100vh;
      display: grid;
      place-items: center;
      background:
        radial-gradient(1000px 600px at 20% 10%, rgba(102,227,255,0.18), transparent 55%),
        radial-gradient(900px 500px at 80% 0%, rgba(109,255,159,0.12), transparent 60%),
        radial-gradient(1000px 700px at 50% 100%, rgba(255,109,122,0.10), transparent 60%),
        linear-gradient(180deg, #0b1220, #070b14 70%);
      padding: 24px;
    }

    .app {
      width: min(980px, 100%);
      display: grid;
      gap: 18px;
    }

    header {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 12px;
    }

    header h1 {
      margin: 0;
      font-weight: 800;
      letter-spacing: 0.5px;
      font-size: clamp(26px, 3.2vw, 40px);
    }

    header .sub {
      color: var(--muted);
      margin-top: 6px;
      font-size: 14px;
    }

    .board {
      background: var(--panel);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .grid {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 0;
    }

    @media (max-width: 860px) {
      .grid { grid-template-columns: 1fr; }
    }

    .left, .right {
      padding: 18px;
    }

    .left {
      border-right: 1px solid rgba(255,255,255,0.08);
    }

    @media (max-width: 860px) {
      .left { border-right: none; border-bottom: 1px solid rgba(255,255,255,0.08); }
    }

    .panel {
      background: var(--panel2);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 16px;
      padding: 14px;
    }

    .row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }

    .label {
      font-size: 13px;
      color: var(--muted);
      letter-spacing: 0.3px;
    }

    .value {
      font-size: 20px;
      font-weight: 750;
    }

    .chips {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 10px;
      margin-top: 12px;
    }

    .chip {
      user-select: none;
      cursor: pointer;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      transition: transform 0.08s ease, background 0.2s ease, border-color 0.2s ease;
      font-weight: 700;
      text-align: center;
    }

    .chip:hover {
      transform: translateY(-1px);
      border-color: rgba(102,227,255,0.55);
      background: rgba(102,227,255,0.12);
    }

    .chip:active { transform: translateY(0px); }

    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
    }

    button {
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 750;
      transition: background 0.2s ease, transform 0.08s ease, border-color 0.2s ease, opacity 0.2s ease;
    }

    button:hover {
      border-color: rgba(102,227,255,0.55);
      background: rgba(102,227,255,0.12);
    }

    button:active { transform: translateY(1px); }

    button.primary {
      background: linear-gradient(135deg, rgba(102,227,255,0.22), rgba(109,255,159,0.16));
      border-color: rgba(102,227,255,0.65);
    }

    button.primary:hover {
      background: linear-gradient(135deg, rgba(102,227,255,0.32), rgba(109,255,159,0.22));
    }

    button.danger {
      border-color: rgba(255,109,122,0.55);
    }

    button.danger:hover {
      background: rgba(255,109,122,0.12);
      border-color: rgba(255,109,122,0.75);
    }

    button:disabled {
      opacity: 0.42;
      cursor: not-allowed;
    }

    .cards {
      display: grid;
      gap: 10px;
      margin-top: 10px;
    }

    .hand {
      display: grid;
      gap: 8px;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.18);
    }

    .hand-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .hand-title {
      font-weight: 800;
      letter-spacing: 0.3px;
    }

    .hand-sub {
      color: var(--muted);
      font-size: 13px;
    }

    .pills {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .pill {
      border: 1px solid rgba(255,255,255,0.14);
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,0.18);
      font-size: 13px;
      color: var(--muted);
    }

    .status {
      margin-top: 14px;
      padding: 14px;
      border-radius: 16px;
      border: 1px dashed rgba(255,255,255,0.18);
      background: rgba(0,0,0,0.18);
      min-height: 64px;
      display: grid;
      gap: 8px;
    }

    .status strong { letter-spacing: 0.2px; }

    .status .msg {
      color: var(--muted);
      font-size: 14px;
      line-height: 1.35;
    }

    .good { color: var(--good); }
    .bad { color: var(--bad); }
    .warn { color: var(--warn); }

    footer {
      color: rgba(232,238,252,0.65);
      font-size: 12px;
      text-align: center;
      margin-top: 8px;
    }

    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 3px 6px;
      border: 1px solid rgba(255,255,255,0.20);
      border-bottom-width: 2px;
      border-radius: 8px;
      background: rgba(0,0,0,0.22);
      color: rgba(232,238,252,0.85);
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>10é»åŠ</h1>
        <div class="sub">ä¸‹æ³¨ â†’ ç©å®¶/èŠå®¶æŠ½ç‰Œ â†’ çµç®— â†’ é‡æ–°ä¸‹æ³¨</div>
      </div>
      <div class="pills" aria-label="å¿«æ·éµæç¤º">
        <div class="pill"><span class="kbd">Enter</span> é–‹å§‹/é‡æ–°é–‹å§‹</div>
        <div class="pill"><span class="kbd">H</span> è¦ç‰Œ</div>
        <div class="pill"><span class="kbd">S</span> åœç‰Œ</div>
        <div class="pill"><span class="kbd">C</span> æ¸…é™¤ä¸‹æ³¨</div>
      </div>
    </header>

    <div class="board">
      <div class="grid">
        <section class="left">
          <div class="panel">
            <div class="row">
              <div>
                <div class="label">è³‡é‡‘</div>
                <div class="value" id="bankroll">$0</div>
              </div>
              <div>
                <div class="label">ç›®å‰ä¸‹æ³¨</div>
                <div class="value" id="bet">$0</div>
              </div>
              <div>
                <div class="label">æœ¬å±€çµæœ</div>
                <div class="value" id="payout">$0</div>
              </div>
            </div>

            <div class="chips" aria-label="ä¸‹æ³¨ç±Œç¢¼">
              <div class="chip" data-amt="5" role="button" tabindex="0" aria-label="ä¸‹æ³¨ 5 å…ƒ">+$5</div>
              <div class="chip" data-amt="10" role="button" tabindex="0" aria-label="ä¸‹æ³¨ 10 å…ƒ">+$10</div>
              <div class="chip" data-amt="25" role="button" tabindex="0" aria-label="ä¸‹æ³¨ 25 å…ƒ">+$25</div>
              <div class="chip" data-amt="50" role="button" tabindex="0" aria-label="ä¸‹æ³¨ 50 å…ƒ">+$50</div>
              <div class="chip" data-amt="100" role="button" tabindex="0" aria-label="ä¸‹æ³¨ 100 å…ƒ">+$100</div>
            </div>

            <div class="controls" aria-label="éŠæˆ²æ“ä½œ">
              <button class="primary" id="dealBtn" aria-label="é–‹å§‹ç™¼ç‰Œ">ç™¼ç‰Œ</button>
              <button id="hitBtn" aria-label="è¦ç‰Œ" disabled>è¦ç‰Œ</button>
              <button id="standBtn" aria-label="åœç‰Œ" disabled>åœç‰Œ</button>
              <button class="danger" id="clearBetBtn" aria-label="æ¸…é™¤ä¸‹æ³¨">æ¸…é™¤ä¸‹æ³¨</button>
              <button id="resetBtn" aria-label="é‡ç½®éŠæˆ²">é‡ç½®</button>
            </div>
          </div>

          <div class="status" role="status" aria-live="polite" aria-label="ç‹€æ…‹è¨Šæ¯">
            <strong id="statusTitle">æº–å‚™ä¸‹æ³¨</strong>
            <div class="msg" id="statusMsg">é¸æ“‡ç±Œç¢¼ä¾†ä¸‹æ³¨ï¼Œç„¶å¾ŒæŒ‰ã€Œç™¼ç‰Œã€ã€‚</div>
          </div>

          <footer>
            æç¤ºï¼šA=1ï¼ŒJ/Q/K=0.5ï¼Œç›®æ¨™10.5ï¼Œè¶…éå³çˆ†ç‰Œã€‚
            <span aria-hidden="true">â€¢</span>
            é€™åªæ˜¯ç¤ºç¯„ï¼Œä¸åŒ…å«çœŸå¯¦é‡‘éŒ¢äº¤æ˜“æˆ–é€²éšè³­å ´è¦å‰‡ã€‚
          </footer>
        </section>

        <section class="right">
          <div class="cards" aria-label="ç‰Œå±€">
            <div class="hand" aria-label="ç©å®¶æ‰‹ç‰Œ">
              <div class="hand-header">
                <div>
                  <div class="hand-title">ç©å®¶</div>
                  <div class="hand-sub" id="playerScore">é»æ•¸ï¼š0</div>
                </div>
                <div class="pills" id="playerBadges" aria-label="ç©å®¶ç‹€æ…‹"></div>
              </div>
              <div id="playerCards" aria-label="ç©å®¶ç‰Œé¢"></div>
            </div>

            <div class="hand" aria-label="èŠå®¶æ‰‹ç‰Œ">
              <div class="hand-header">
                <div>
                  <div class="hand-title">èŠå®¶</div>
                  <div class="hand-sub" id="dealerScore">é»æ•¸ï¼š0</div>
                </div>
                <div class="pills" id="dealerBadges" aria-label="èŠå®¶ç‹€æ…‹"></div>
              </div>
              <div id="dealerCards" aria-label="èŠå®¶ç‰Œé¢"></div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script>
    // ---- Game state (keep mechanics unchanged) ----
    const bankrollEl = document.getElementById('bankroll');
    const betEl = document.getElementById('bet');
    const payoutEl = document.getElementById('payout');

    const statusTitleEl = document.getElementById('statusTitle');
    const statusMsgEl = document.getElementById('statusMsg');

    const dealBtn = document.getElementById('dealBtn');
    const hitBtn = document.getElementById('hitBtn');
    const standBtn = document.getElementById('standBtn');
    const clearBetBtn = document.getElementById('clearBetBtn');
    const resetBtn = document.getElementById('resetBtn');

    const playerCardsEl = document.getElementById('playerCards');
    const dealerCardsEl = document.getElementById('dealerCards');
    const playerScoreEl = document.getElementById('playerScore');
    const dealerScoreEl = document.getElementById('dealerScore');
    const playerBadgesEl = document.getElementById('playerBadges');
    const dealerBadgesEl = document.getElementById('dealerBadges');

    let bankroll = 500;
    let bet = 0;
    let payout = 0;

    let deck = [];
    let player = [];
    let dealer = [];
    let inRound = false;
    let dealerHidden = true;

    function setStatus(title, msg, cls = '') {
      statusTitleEl.className = cls;
      statusTitleEl.textContent = title;
      statusMsgEl.textContent = msg;
    }

    function fmt(n) {
      return '$' + n.toLocaleString('en-US');
    }

    function renderMoney() {
      bankrollEl.textContent = fmt(bankroll);
      betEl.textContent = fmt(bet);
      payoutEl.textContent = fmt(payout);
    }

    function newDeck() {
      const suits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
      const ranks = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
      const d = [];
      for (const s of suits) {
        for (const r of ranks) d.push({ r, s });
      }
      // shuffle
      for (let i = d.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [d[i], d[j]] = [d[j], d[i]];
      }
      return d;
    }

    function cardValue(card) {
      if (card.r === 'A') return 1;
      if (['K','Q','J'].includes(card.r)) return 0.5;
      return Number(card.r);
    }

    function score(hand) {
      let total = 0;
      for (const c of hand) {
        total += cardValue(c);
      }
      return total;
    }

    function renderHand(el, hand, hideFirst = false) {
      el.innerHTML = '';
      hand.forEach((c, idx) => {
        const div = document.createElement('div');
        div.style.display = 'inline-grid';
        div.style.placeItems = 'center';
        div.style.width = '54px';
        div.style.height = '74px';
        div.style.marginRight = '8px';
        div.style.borderRadius = '14px';
        div.style.border = '1px solid rgba(255,255,255,0.18)';
        div.style.background = 'rgba(0,0,0,0.25)';
        div.style.boxShadow = '0 10px 20px rgba(0,0,0,0.25)';
        div.style.fontWeight = '800';
        div.style.letterSpacing = '0.5px';
        div.style.userSelect = 'none';

        if (hideFirst && idx === 0) {
          div.textContent = 'ğŸ‚ ';
          div.setAttribute('aria-label', 'éš±è—ç‰Œ');
        } else {
          div.textContent = `${c.r}${c.s}`;
          div.setAttribute('aria-label', `ç‰Œ ${c.r}${c.s}`);
          if (c.s === 'â™¥' || c.s === 'â™¦') div.style.color = '#ff8a98';
        }
        el.appendChild(div);
      });
    }

    function badge(container, text, cls = '') {
      const b = document.createElement('div');
      b.className = 'pill ' + cls;
      b.textContent = text;
      container.appendChild(b);
    }

    function clearBadges() {
      playerBadgesEl.innerHTML = '';
      dealerBadgesEl.innerHTML = '';
    }

    function syncUI() {
      renderMoney();
      renderHand(playerCardsEl, player, false);
      renderHand(dealerCardsEl, dealer, dealerHidden);

      const pScore = score(player);
      const dScore = dealerHidden && dealer.length > 1 ? cardValue(dealer[1]) : score(dealer);

      playerScoreEl.textContent = `é»æ•¸ï¼š${pScore % 1 === 0 ? pScore : pScore.toFixed(1)}`;
      dealerScoreEl.textContent = `é»æ•¸ï¼š${dScore % 1 === 0 ? dScore : dScore.toFixed(1)}` + (dealerHidden && dealer.length > 1 ? 'ï¼ˆæ˜ç‰Œï¼‰' : '');

      dealBtn.disabled = inRound || bet <= 0;
      hitBtn.disabled = !inRound;
      standBtn.disabled = !inRound;
      clearBetBtn.disabled = inRound;

      // reset button always available
    }

    function canBetMore(amt) {
      return bankroll - bet >= amt && !inRound;
    }

    function addBet(amt) {
      if (!canBetMore(amt)) return;
      bet += amt;
      setStatus('å·²ä¸‹æ³¨', `ç›®å‰ä¸‹æ³¨ï¼š${fmt(bet)}ã€‚æŒ‰ã€Œç™¼ç‰Œã€é–‹å§‹ã€‚`, '');
      syncUI();
    }

    function clearBet() {
      if (inRound) return;
      bet = 0;
      payout = 0;
      setStatus('æº–å‚™ä¸‹æ³¨', 'é¸æ“‡ç±Œç¢¼ä¾†ä¸‹æ³¨ï¼Œç„¶å¾ŒæŒ‰ã€Œç™¼ç‰Œã€ã€‚', '');
      syncUI();
    }

    function startRound() {
      if (inRound || bet <= 0) return;
      if (bankroll < bet) return;

      bankroll -= bet;
      payout = 0;

      deck = newDeck();
      player = [deck.pop(), deck.pop()];
      dealer = [deck.pop(), deck.pop()];
      dealerHidden = true;
      inRound = true;
      clearBadges();

      const p = score(player);
      if (p === 10.5) {
        // natural 10.5
        dealerHidden = false;
        settle(true);
        return;
      }

      setStatus('å·²ç™¼ç‰Œ', 'è¼ªåˆ°ä½ äº†ï¼šè¦ç‰Œï¼ˆHï¼‰æˆ–åœç‰Œï¼ˆSï¼‰ã€‚', '');
      syncUI();
    }

    function hit() {
      if (!inRound) return;
      player.push(deck.pop());
      const p = score(player);
      if (p > 10.5) {
        dealerHidden = false;
        badge(playerBadgesEl, 'çˆ†ç‰Œ', 'bad');
        settle(false, true);
        return;
      }
      if (p === 10.5) {
        stand();
        return;
      }
      setStatus('è¦ç‰Œ', 'ä½ é¸æ“‡è¦ç‰Œã€‚å¯ç¹¼çºŒè¦ç‰Œæˆ–åœç‰Œã€‚', '');
      syncUI();
    }

    function stand() {
      if (!inRound) return;
      dealerHidden = false;

      // dealer draws until 7.5+
      while (score(dealer) < 7.5) dealer.push(deck.pop());

      settle(false);
    }

    function settle(natural = false, playerBust = false) {
      const p = score(player);
      const d = score(dealer);

      inRound = false;

      let title = '';
      let msg = '';
      let cls = '';

      if (playerBust) {
        title = 'ä½ çˆ†ç‰Œäº†';
        msg = 'è¶…é 10.5ï¼Œæœ¬å±€ä½ è¼¸äº†ã€‚';
        cls = 'bad';
        payout = 0;
      } else if (natural && p === 10.5) {
        // natural 10.5 pays 3:2
        if (d === 10.5) {
          title = 'å¹³æ‰‹';
          msg = 'é›™æ–¹çš†ç‚º 10.5 é»ï¼Œé€€å›ä¸‹æ³¨é‡‘é¡ã€‚';
          cls = 'warn';
          payout = bet;
        } else {
          title = 'å¤©ç”Ÿ 10.5ï¼';
          msg = 'ä½ ä»¥å…©å¼µç‰Œé”æˆ 10.5 ç²å‹ï¼ˆ3:2ï¼‰ã€‚';
          cls = 'good';
          payout = Math.floor(bet * 2.5);
        }
      } else {
        if (d > 10.5) {
          title = 'èŠå®¶çˆ†ç‰Œ';
          msg = 'èŠå®¶è¶…é 10.5ï¼Œä½ è´äº†ï¼';
          cls = 'good';
          payout = bet * 2;
        } else if (p > d) {
          title = 'ä½ è´äº†';
          msg = 'æ­å–œï¼ä½ çš„é»æ•¸æ›´é«˜ã€‚';
          cls = 'good';
          payout = bet * 2;
        } else if (p < d) {
          title = 'ä½ è¼¸äº†';
          msg = 'èŠå®¶é»æ•¸æ›´é«˜ã€‚';
          cls = 'bad';
          payout = 0;
        } else {
          title = 'å¹³æ‰‹';
          msg = 'é»æ•¸ç›¸åŒï¼Œé€€å›ä¸‹æ³¨é‡‘é¡ã€‚';
          cls = 'warn';
          payout = bet;
        }
      }

      bankroll += payout;

      if (p === 10.5) badge(playerBadgesEl, '10.5', 'good');
      if (d === 10.5) badge(dealerBadgesEl, '10.5', 'good');
      if (d > 10.5) badge(dealerBadgesEl, 'çˆ†ç‰Œ', 'bad');

      setStatus(title, msg + ' è«‹é‡æ–°ä¸‹æ³¨é–‹å§‹ä¸‹ä¸€å±€ã€‚', cls);

      // reset bet automatically for clarity? keep existing behavior: bet stays until cleared by user
      bet = 0;
      syncUI();
    }

    function resetGame() {
      bankroll = 500;
      bet = 0;
      payout = 0;
      deck = [];
      player = [];
      dealer = [];
      inRound = false;
      dealerHidden = true;
      clearBadges();
      setStatus('å·²é‡ç½®', 'è³‡é‡‘å·²æ¢å¾©ç‚ºé è¨­å€¼ã€‚è«‹å…ˆä¸‹æ³¨å†ç™¼ç‰Œã€‚', '');
      syncUI();
    }

    // chips
    document.querySelectorAll('.chip').forEach(chip => {
      chip.addEventListener('click', () => addBet(Number(chip.dataset.amt)));
      chip.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          addBet(Number(chip.dataset.amt));
        }
      });
    });

    // buttons
    dealBtn.addEventListener('click', startRound);
    hitBtn.addEventListener('click', hit);
    standBtn.addEventListener('click', stand);
    clearBetBtn.addEventListener('click', clearBet);
    resetBtn.addEventListener('click', resetGame);

    // keyboard shortcuts
    window.addEventListener('keydown', (e) => {
      const key = e.key.toLowerCase();
      if (key === 'enter') {
        if (!inRound) startRound();
      } else if (key === 'h') {
        hit();
      } else if (key === 's') {
        stand();
      } else if (key === 'c') {
        clearBet();
      }
    });

    // init
    setStatus('æº–å‚™ä¸‹æ³¨', 'é¸æ“‡ç±Œç¢¼ä¾†ä¸‹æ³¨ï¼Œç„¶å¾ŒæŒ‰ã€Œç™¼ç‰Œã€ã€‚', '');
    // initial empty hands
    player = [];
    dealer = [];
    syncUI();
  </script>
</body>
</html>
